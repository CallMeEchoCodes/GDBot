const fs=require("fs"),Discord=require("discord.js"),{prefix,token}=require("./config.json"),client=new Discord.Client;client.commands=new Discord.Collection,client.cooldowns=new Discord.Collection;const commandFolders=fs.readdirSync("./commands");for(const a of commandFolders){const b=fs.readdirSync(`./commands/${a}`).filter(e=>e.endsWith(".js"));for(const d of b){const e=require(`./commands/${a}/${d}`);client.commands.set(e.name,e)}}client.once("ready",()=>{console.log(`Logged in as ${client.user.tag}!`)}),client.on("message",n=>{if(n.content.startsWith(prefix)&&!n.author.bot){const s=n.content.slice(prefix.length).trim().split(/ +/),r=s.shift().toLowerCase(),i=client.commands.get(r)||client.commands.find(e=>e.aliases&&e.aliases.includes(r));if(i){if(i.guildOnly&&"dm"===n.channel.type)return n.reply("I can't execute that command inside DMs!");if(i.permissions){const d=n.channel.permissionsFor(n.author);if(!d||!d.has(i.permissions))return n.reply("You can not do this!")}if(i.args&&!s.length){let e=`You didn't provide any arguments, ${n.author}!`;return i.usage&&(e+=`\nThe proper usage would be: \`${prefix}${i.name} ${i.usage}\``),n.channel.send(e)}const{cooldowns:c}=client;c.has(i.name)||c.set(i.name,new Discord.Collection);var e=Date.now();const a=c.get(i.name);var o=1e3*(i.cooldown||3);if(a.has(n.author.id)){var t=a.get(n.author.id)+o;if(e<t){const l=(t-e)/1e3;return n.reply(`please wait ${l.toFixed(1)} more second(s) before reusing the \`${i.name}\` command.`)}}a.set(n.author.id,e),setTimeout(()=>a.delete(n.author.id),o);try{i.execute(n,s)}catch(e){console.error(e),n.reply("there was an error trying to execute that command!")}}}}),client.login(token);